---
alwaysApply: true
---

# Git Workflow and Branch Naming

We follow a light GitFlow model adapted for small teams and open-source projects.

## Branch Naming Conventions

All branches must follow these naming patterns:

### Available Branch Prefixes

| Prefix    | Usage                                          | Example                                    |
| --------- | ---------------------------------------------- | ------------------------------------------ |
| `feature/` | New features or bug fixes (contributors)      | `feature/improve-genre-classification`    |
| `hotfix/` | Urgent bug fixes on production (maintainers)   | `hotfix/critical-metadata-bug`             |
| `chore/`  | Maintenance, infrastructure, configuration     | `chore/update-dependencies`               |

### Branch Naming Rules

- **Use lowercase** for branch names
- **Use hyphens** to separate words (not underscores or camelCase)
- **Be descriptive** - the branch name should indicate what it does
- **No `fix/` prefix** - use `feature/` for bug fixes or `hotfix/` for urgent production fixes
- **Include issue numbers when applicable** - If the branch addresses a specific GitHub issue, include the issue number in the branch name (e.g., `feature/123-add-flac-support`)

### When to Use Each Prefix

**Use `feature/` for:**
- New user-facing features or enhancements
- Bug fixes in library code (the `audiometa/` package)
- Changes that affect the public API or user experience
- Examples: `feature/add-flac-support`, `feature/fix-id3v1-encoding`

**Use `chore/` for:**
- Infrastructure and tooling fixes (pre-commit hooks, CI/CD workflows, build scripts)
- Dependency updates
- Documentation infrastructure changes
- Repository configuration and setup
- Examples: `chore/update-dependencies`, `chore/fix-pre-commit-hook`, `chore/ci-workflow-improvements`

**Use `hotfix/` for:**
- Urgent bug fixes that need to be deployed immediately to production
- Critical security patches
- Typically used by maintainers for time-sensitive fixes
- Examples: `hotfix/critical-security-patch`, `hotfix/critical-metadata-bug`

### Examples

```bash
# ✅ Good
git checkout -b feature/add-flac-support
git checkout -b feature/fix-id3v1-encoding
git checkout -b feature/123-add-flac-support         # With issue number
git checkout -b feature/456-fix-id3v1-encoding       # With issue number
git checkout -b chore/update-ruff-version
git checkout -b chore/ci-workflow-improvements
git checkout -b hotfix/critical-security-patch
git checkout -b hotfix/789-critical-metadata-bug     # With issue number

# ❌ Bad
git checkout -b fix/encoding-issue          # Use feature/ instead
git checkout -b FixEncoding                 # Wrong format
git checkout -b feature/fix_encoding        # Use hyphens, not underscores
git checkout -b bugfix/encoding             # Not a valid prefix
git checkout -b feature/#123                # Missing description after issue number
```

### Branch Names with Issue Numbers

When your branch addresses a specific GitHub issue, include the issue number in the branch name:

- **Format**: `<prefix>/<issue-number>-<description>`
- **Examples**:
  - `feature/123-add-flac-support` - Feature addressing issue #123
  - `feature/456-fix-id3v1-encoding` - Bug fix addressing issue #456
  - `hotfix/789-critical-security-patch` - Hotfix addressing issue #789
  - `chore/234-update-dependencies` - Chore addressing issue #234

**Note:** Always include a descriptive name after the issue number. The issue number alone is not sufficient (e.g., `feature/123` is not descriptive enough).

## Main Branch

- The stable, always-deployable branch
- All tests must pass before merging
- Releases are tagged from `main`

## Feature Branches

- Create one for each new feature or bug fix
- Merge into `main` via Pull Request when complete and tested
- Use `feature/` prefix for both new features and regular bug fixes

## Hotfix Branches

- For urgent bug fixes on production versions
- Typically used by maintainers
- Contributors can submit fixes via feature branches that maintainers may promote to hotfixes if needed

## Chore Branches

- For maintenance, infrastructure, and configuration work
- Examples: repository setup, CI/CD changes, dependency updates, documentation infrastructure
- Merge into `main` via Pull Request when complete
